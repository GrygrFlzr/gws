@import 'tailwindcss';
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';

@theme {
  /* Semantic Theme Variables */
  --color-page: light-dark(#f9fafb, #030712);
  --color-card: light-dark(#ffffff, #111827);
  --color-muted: light-dark(#f3f4f6, #1f2937);

  --color-fg-primary: light-dark(#111827, #f9fafb);
  --color-fg-secondary: light-dark(#4b5563, #9ca3af);

  --color-border-main: light-dark(#e5e7eb, #374151);

  /* Tactical Glows */
  --color-glow-primary: light-dark(var(--color-sky-400), var(--color-sky-600));
  --color-glow-secondary: light-dark(var(--color-indigo-500), var(--color-indigo-700));
  --color-glow-accent: light-dark(var(--color-pink-400), var(--color-pink-600));

  --color-link: light-dark(var(--color-sky-600), var(--color-sky-400));
  --color-brand: light-dark(var(--color-sky-600), var(--color-sky-400));

  /* Tactical Theme Variables */
  --color-tactical-bg: light-dark(var(--color-white), var(--color-gray-900));
  --color-tactical-text: light-dark(var(--color-gray-900), var(--color-gray-100));
  --color-tactical-border: light-dark(var(--color-gray-200), var(--color-gray-700));

  /* Semantic Badge Colors */
  --color-badge-primary-bg: light-dark(
    var(--color-sky-50),
    color-mix(in srgb, var(--color-sky-900) 30%, transparent)
  );
  --color-badge-primary-text: light-dark(var(--color-sky-700), var(--color-sky-200));

  --color-badge-success-bg: light-dark(
    var(--color-green-50),
    color-mix(in srgb, var(--color-green-900) 30%, transparent)
  );
  --color-badge-success-text: light-dark(var(--color-green-700), var(--color-green-200));

  --color-badge-neutral-bg: light-dark(var(--color-gray-100), var(--color-gray-800));
  --color-badge-neutral-text: light-dark(var(--color-gray-600), var(--color-gray-400));

  /* Semantic State Colors */
  --color-error-bg: light-dark(
    var(--color-red-50),
    color-mix(in srgb, var(--color-red-900) 30%, transparent)
  );
  --color-error-text: light-dark(var(--color-red-700), var(--color-red-200));
  --color-error-border: light-dark(var(--color-red-200), var(--color-red-900));

  /* Interactive Elements */
  --color-card-hover: light-dark(
    var(--color-gray-50),
    color-mix(in srgb, var(--color-gray-800) 50%, transparent)
  );
}

:root {
  background-color: var(--color-page);
  color: var(--color-fg-primary);
  color-scheme: light dark;
}

/* Ensure all headings respect the theme color */
:is(h1, h2, h3, h4, h5, h6) {
  color: var(--color-fg-primary) !important;
}

/* Global Reset for borders to fix dark mode divider issues */
*,
::after,
::before,
::backdrop,
::file-selector-button {
  border-color: var(--color-border-main);
}

/* Base utility overrides */
.bg-white {
  background-color: var(--color-card) !important;
}

.bg-gray-50 {
  background-color: var(--color-page) !important;
}

.bg-gray-100 {
  background-color: var(--color-muted) !important;
}

/* Fix for transparency on themed backgrounds */
.bg-white\/50 {
  background-color: light-dark(
    color-mix(in srgb, white 50%, transparent),
    color-mix(in srgb, #111827 50%, transparent)
  ) !important;
}

.text-gray-900,
.text-gray-700 {
  color: var(--color-fg-primary) !important;
}

.text-gray-600,
.text-gray-500 {
  color: var(--color-fg-secondary) !important;
}

.border-gray-200,
.ring-gray-200 {
  border-color: var(--color-border-main) !important;
  --tw-ring-color: var(--color-border-main) !important;
}

/* Ensure Tailwind 4 dividers use the themed border color */
:is([class*='divide-']) > :not([hidden]) ~ :not([hidden]) {
  border-color: var(--color-border-main) !important;
}

/* Global link hover improvements */
a {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}

.hover\:text-gray-900:hover {
  color: var(--color-fg-primary) !important;
}

.hover\:bg-gray-50:hover {
  background-color: var(--color-muted) !important;
}

/* Typography plugin overrides */
.prose {
  --tw-prose-body: var(--color-fg-secondary);
  --tw-prose-headings: var(--color-fg-primary);
  --tw-prose-links: var(--color-link);
  --tw-prose-bold: var(--color-fg-primary);
  --tw-prose-counters: var(--color-fg-secondary);
  --tw-prose-bullets: var(--color-border-main);
  --tw-prose-hr: var(--color-border-main);
  --tw-prose-quotes: var(--color-fg-primary);
  --tw-prose-quote-borders: var(--color-border-main);
  --tw-prose-captions: var(--color-fg-secondary);
  --tw-prose-code: var(--color-fg-primary);
  --tw-prose-pre-code: var(--color-muted);
  --tw-prose-pre-bg: var(--color-fg-primary);
  --tw-prose-th-borders: var(--color-border-main);
  --tw-prose-td-borders: var(--color-border-main);
}
